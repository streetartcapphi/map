/*!
html5db.js - HTML5 Video Player
Version 2.0

2015 Tanida Software
www.demo-builder.com
*/
;var mobile={Android:function(){return navigator.userAgent.match(/Android/i)?true:false},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?true:false},iPhone:function(){return navigator.userAgent.match(/iPhone/i)?true:false},iPad:function(){return navigator.userAgent.match(/iPad/i)?true:false},iPod:function(){return navigator.userAgent.match(/iPod/i)?true:false},iOS:function(){return(mobile.iPhone()||mobile.iPad()||mobile.iPod())},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?true:false},any:function(){return(mobile.Android()||mobile.BlackBerry()||mobile.iOS()||mobile.Windows())}};function dbmenu(video,config){var self=this;var clickEventName="click";var parentItem;var container;var createContainer=function(){container=document.createElement("div");container.className="db-nav-container";container.style.background=config.design.menu.bg1;container.style.background="-moz-linear-gradient(top, "+config.design.menu.bg1+" 0%, "+config.design.menu.bg2+" 100%)";container.style.background="-webkit-gradient(linear, left top, left bottom, color-stop(0%, "+config.design.menu.bg1+"), color-stop(100%, "+config.design.menu.bg2+"))";container.style.background="-webkit-linear-gradient(top, "+config.design.menu.bg1+" 0%, "+config.design.menu.bg2+" 100%)";container.style.background="-o-linear-gradient(top, "+config.design.menu.bg1+" 0%, "+config.design.menu.bg2+" 100%)";container.style.background="-ms-linear-gradient(top, "+config.design.menu.bg1+" 0%, "+config.design.menu.bg2+" 100%)";container.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr="+config.design.menu.bg1+", endColorstr="+config.design.menu.bg2+")";container.style.background="linear-gradient(to bottom, "+config.design.menu.bg1+" 0%, "+config.design.menu.bg2+" 100%)";container.style.borderBottomColor=config.design.menu.spacer;video.parentNode.insertBefore(container,video)};var createElement=function(parent,tag,cssclass){var el=document.createElement(tag);if(tag=="a"){el.href="#"}if(cssclass){el.className=cssclass}parent.appendChild(el);return el};var loadItems=function(){var items,subitems;var i,j;var m,ul,li,a;var eventName;if(mobile.iPad()){eventName="touchstart"}else{eventName="mouseover"}m=createElement(container,"ul","db-nav");m.style.fontFamily=config.design.font;m.style.fontSize=config.design.size+"px";items=config.items;for(i=0;i<=items.length-1;i++){li=createElement(m,"li");a=createElement(li,"a");a.style.color=config.design.menu.text;a.style.borderRightColor=config.design.menu.spacer;a.innerHTML=items[i].caption;li.addEventListener(eventName,function(event){event.preventDefault();if(parentItem){parentItem.firstChild.style.color=config.design.menu.text;parentItem.firstChild.style.backgroundColor="transparent";parentItem=null}if(this.childNodes.length==2){this.firstChild.style.backgroundColor=config.design.submenu.bg;this.lastChild.style.display="block";parentItem=this}else{this.firstChild.style.color=config.design.selected.text;this.firstChild.style.backgroundColor=config.design.selected.bg;parentItem=null}},true);if(mobile.iPad()){video.addEventListener("touchstart",function(event){event.preventDefault();if(parentItem){parentItem.firstChild.style.color=config.design.menu.text;parentItem.firstChild.style.backgroundColor="transparent";parentItem=null}},true)}else{li.addEventListener("mouseout",function(event){var e=event.toElement||event.relatedTarget;while(e&&e.parentNode&&e.parentNode!=window){if(e.parentNode==this||e==this){if(e.preventDefault){e.preventDefault()}return false}e=e.parentNode}this.firstChild.style.color=config.design.menu.text;this.firstChild.style.backgroundColor="transparent"},true)}if(items[i].action){a.setAttribute("data-action",items[i].action);if(items[i].parama){a.setAttribute("data-parama",items[i].parama)}if(items[i].paramb){a.setAttribute("data-paramb",items[i].paramb)}a.addEventListener(clickEventName,onItemClick,false)}if(items[i].submenu){ul=createElement(li,"ul");ul.style.backgroundColor=config.design.submenu.bg;if(config.design.submenu.opacity<100){ul.style.opacity=config.design.submenu.opacity/100}subitems=items[i].submenu;for(j=0;j<=subitems.length-1;j++){li=createElement(ul,"li");a=createElement(li,"a");a.style.backgroundColor=config.design.submenu.bg;a.style.color=config.design.submenu.text;a.style.borderBottomColor=config.design.submenu.spacer;a.innerHTML=subitems[j].caption;a.addEventListener("mouseover",function(){this.style.color=config.design.selected.text;this.style.background=config.design.selected.bg},false);a.addEventListener("mouseout",function(){this.style.color=config.design.submenu.text;this.style.background=config.design.submenu.bg},false);if(subitems[j].action){a.setAttribute("data-action",subitems[j].action);if(subitems[j].parama){a.setAttribute("data-parama",subitems[j].parama)}if(subitems[j].paramb){a.setAttribute("data-paramb",subitems[j].paramb)}a.addEventListener(clickEventName,onItemClick,false)}}}}};var onItemClick=function(event){event.preventDefault();if(this.parentNode.parentNode.parentNode.tagName=="LI"){this.parentNode.parentNode.style.display="none";this.parentNode.parentNode.parentNode.firstChild.style.backgroundColor="transparent";parentItem=null}var action;action=parseInt(this.getAttribute("data-action"));switch(action){case 0:break;case 1:if(!isNaN(video.duration)){var position=parseInt(this.getAttribute("data-parama"));video.currentTime=position/30}break;case 2:break;case 3:var url=this.getAttribute("data-parama");var wnd=parseInt(this.getAttribute("data-paramb"));if((url.indexOf("http://")==-1)&&(url.indexOf("https://")==-1)){url="http://"+url}switch(wnd){case 0:window.location=url;break;case 1:var newtab=window.open();newtab.location=url;break;case 2:window.opener.location.href=url;break;case 3:top.location=url;break}break;case 4:break;case 5:var email=this.getAttribute("data-parama");window.open("mailto:"+email);break;case 6:var FF=(document.getBoxObjectFor!=null||window.mozInnerScreenX!=null);if(FF){alert("In Firefox you can only close a window that was previously opened via JavaScript")}else{window.close()}break;case 7:var code=this.getAttribute("data-parama");eval(code);break}};this.getHeight=function(){return container.getBoundingClientRect().height};this.init=function(){if(mobile.iPad()){clickEventName="touchstart"}createContainer();loadItems()}}function dbplayer(j,a,d,U,B,ad,Y){var r=this;var al="click";var W;this.fullscreen=false;var D,p,c,y,P,ah;var F,af;var ag,v;var ae,M=false;var aa,X,w=false;var Q,u,Z,H,C;var R;var ac;var E=function(){W=document.createElement("div");W.className="db-video-player";W.className=W.className+" "+ad;if(Y.enlarge){W.className=W.className+" enlarge"}if(Y.aligntop){W.className=W.className+" top"}if(Y.aligntop){j.parentNode.insertBefore(W,j)}else{j.parentNode.appendChild(W)}};var S=function(ao,am,ap){var an=document.createElement(am);if(am=="button"){an.setAttribute("type","button")}if(am=="a"){an.href="#"}if(ap){an.className=ap}ao.appendChild(an);return an};var f=function(){var aw;D=S(W,"button","db-video-play play");aw=S(D,"span");if(!mobile.iPad()){p=S(W,"button","db-video-mute mute-off");aw=S(p,"span")}if(!mobile.iPad()){aa=S(W,"div","db-video-volume-bar");var av=S(aa,"div","db-video-volume-bg");X=S(av,"div","db-video-volume");X.style.width="100%";if(ad=="classic"){aa.style.display="none"}}var au=S(W,"a","db-video-time");ae=S(au,"span");ae.innerHTML="00:00";if(Y.about){ah=S(W,"button","db-video-about");aw=S(ah,"span")}if(Y.fullscreen){P=S(W,"button","db-video-fullscreen");aw=S(P,"span")}y=S(W,"button","db-video-replay");aw=S(y,"span");if((ad!="classic")&&(Y.caption!="")){c=S(W,"a","db-video-caption");c.innerHTML=Y.caption;var ap=Y.captionurl;if(ap==""){ap="#"}else{if((ap.indexOf("http://")==-1)&&(ap.indexOf("https://")==-1)){ap="http://"+ap}c.target="_blank"}c.href=ap}Q=S(W,"div","db-video-progress-bar");u=S(Q,"span","db-video-hint-time db-hide");Z=S(Q,"div","db-video-progress-load");Z.style.width="0%";H=S(Q,"div","db-video-progress");H.style.width="0%";if(ad=="classic"){var ao=145;if(mobile.iPad()){ao=ao-35}Q.style.marginLeft=ao+"px";var an=120;if(!Y.fullscreen){an=an-40}if(!Y.about){an=an-40}Q.style.marginRight=an+"px"}if(mobile.iPad()){C=S(Q,"div","db-video-seek");aw=S(C,"span","")}if(Y.about){ag=S(j.parentNode,"div","db-info-box-wrapper db-hide");var ax='<div class="db-info-box"><div class="db-info-box-header"><div class="db-info-box-icon"></div><a href="#" class="db-info-box-close">Close</a><h2>Information</h2></div><div class="db-info-box-content"><div class="db-info-box-item" ><h3>Author</h3><p class="info-box-author">%author%</p></div><div class="db-info-box-item" ><h3>Company</h3><p class="info-box-company">%company%</p></div><div class="db-info-box-item" ><h3>E-mail</h3><a href="mailto:%email%" class="db-info-box-email">%email%</a></div><div class="db-info-box-item" ><h3>Website</h3><a href="%website_url%" target="_blank" class="db-info-box-website">%website%</a></div></div></div><div class="db-info-box-bg"></div>';var aq,at,ar,am;aq=Y.about_options.author;at=Y.about_options.company;ar=Y.about_options.email;if(aq==""){aq="&nbsp;"}if(at==""){at="&nbsp;"}if(ar==""){ar="&nbsp;"}ax=ax.replace("%author%",aq);ax=ax.replace("%company%",at);ax=ax.replace("%email%",ar).replace("%email%",ar);am=Y.about_options.website;if(am==""){am="&nbsp;"}else{am=am.replace("http://","").replace("https://","")}ax=ax.replace("%website%",am);am=Y.about_options.website;if(am==""){am="#"}else{if((am.indexOf("http://")==-1)&&(am.indexOf("https://")==-1)){am="http://"+am}}ax=ax.replace("%website_url%",am);ag.innerHTML=ax;v=ag.getElementsByClassName("db-info-box-close")[0]}};var z=function(){var at=screen.width;var ao=screen.height;var av=a;var ap=d;var an,au,am;var aq;var ar=T()+10;ao=ao-ar;ao=ao-U;an=at/av;au=ao/ap;am=Math.min(an,au);av=Math.floor(am*av);aq=440;if(av<aq){av=aq;am=av/a}ap=Math.floor(am*ap);j.setAttribute("width",av);j.setAttribute("height",ap);j.parentNode.style.width=av+"px"};var T=function(){return W.getBoundingClientRect().height};this.fitToBrowser=function(){var ar=window.innerWidth;var ao=window.innerHeight;var am=a;var ap=d;var at,an,aq;var au;ar=ar-20;ao=ao-T()-20;ao=ao-U;at=ar/am;an=ao/ap;aq=Math.min(at,an);am=Math.floor(aq*am);au=440;if(am<au){am=au;aq=am/a}ap=Math.floor(aq*ap);j.setAttribute("width",am);j.setAttribute("height",ap);j.parentNode.style.width=am+"px"};this.play=function(){j.play()};this.pause=function(){j.pause()};this.canFullscreen=function(){if((F)&&(af)){return true}else{return false}};this.toggleFullScreen=function(){this.fullscreen=!this.fullscreen;if(this.fullscreen){if(this.canFullscreen()){F.call(j.parentNode)}else{r.fitToBrowser()}if(P){P.className="db-video-smallscreen"}}else{if(this.canFullscreen()){af.call(document)}else{o()}if(P){P.className="db-video-fullscreen"}}};var o=function(){j.setAttribute("width",a);j.setAttribute("height",d);j.parentNode.style.width=a+"px"};var ab=function(ao){var am=Math.floor(ao/3600);var an=Math.floor((ao-(am*3600))/60);var ao=ao-(am*3600)-(an*60);am="";if((am>0)&&(am<10)){am="0"+am+":"}if(an<10){an="0"+an}if(ao<10){ao="0"+ao}return am+an+":"+ao};var N=function(ao){if(j.seekable&&j.seekable.length>0){for(var an=0,am=j.seekable.length;an<am;an++){if(ao>j.seekable.start(an)&&ao<j.seekable.end(an)){return true}}}return false};var ai=function(){if(j.paused){D.className="db-video-play pause"}else{D.className="db-video-play play"}};var L=function(){if(j.muted){p.className="db-video-mute mute-on";X.style.display="none"}else{p.className="db-video-mute mute-off";X.style.display="block";X.style.width=Math.round(j.volume*100)+"%"}};var q=function(){if(isNaN(j.duration)){return}var am=0;if(j.currentTime>0){am=Math.round((100/j.duration)*j.currentTime);var an;if(M){an=Math.round(j.duration-j.currentTime)}else{an=Math.round(j.currentTime)}ae.innerHTML=ab(an)}H.style.width=am+"%";if(C){C.style.left=am+"%"}};var K=function(){if(isNaN(j.duration)){return}if(j.buffered.length==0){return}var an=j.buffered;var ap=an.start(j.buffered.length-1);var am=an.end(j.buffered.length-1);var ao=Math.round((100/j.duration)*am);Z.style.width=ao+"%"};var t=function(){if(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen){setTimeout(function(){z()},200)}else{setTimeout(function(){if(B){r.fitToBrowser()}else{o()}this.fullscreen=false;if(P){P.className="db-video-fullscreen"}},200)}};var ak=function(am){am.preventDefault();if(j.paused){j.play()}else{j.pause()}};var i=function(am){am.preventDefault();j.muted=!j.muted;if((!j.muted)&&(j.volume==0)){j.volume=1}};var x=function(ao){var an=aa.getBoundingClientRect();var am=ao-an.left;if(am<=0){am=0}if(am>=an.width){am=an.width}j.volume=am/an.width;if(j.volume==0){j.muted=true}else{j.muted=false}};var h=function(am){am.preventDefault();w=true;x(am.clientX)};var s=function(am){am.preventDefault();if(w){x(am.clientX)}};var G=function(am){am.preventDefault();w=false};var l=function(am){am.preventDefault();if(isNaN(j.duration)){return}M=!M;q();if(M){ae.className="db-video-time db-video-time-remaining"}else{ae.className="db-video-time"}};var J=function(ap){ap.preventDefault();if(isNaN(j.duration)){return}var ao=Q.getBoundingClientRect();var am=ap.clientX-ao.left;if((am>=0)&&(am<=ao.width)){var an=(((am/ao.width)).toFixed(2));var aq=Math.round(j.duration*an);u.style.left=am+"px";u.innerHTML=ab(aq);u.className="db-video-hint-time"}else{u.className="db-video-hint-time db-hide"}};var e=function(am){am.preventDefault();if(isNaN(j.duration)){return}u.className="db-video-hint-time db-hide"};var m=function(ap){ap.preventDefault();if(isNaN(j.duration)){return}var ao=Q.getBoundingClientRect();var am=ap.clientX-ao.left;var an=(((am/ao.width)).toFixed(2));var aq=j.duration*an;if(N(aq)){j.currentTime=aq}};var V=function(ao){var an=ao-Q.getBoundingClientRect().left;var am=Q.getBoundingClientRect().width;if(an<0){an=0}if(an>am){an=am}var aq=an/am;var ap=j.duration*aq;if(!N(ap)){return}var ar=Math.round((100/j.duration)*ap);var at;if(M){at=Math.round(j.duration-ap)}else{at=Math.round(ap)}ae.innerHTML=ab(at);H.style.width=ar+"%";C.style.left=ar+"%";if(ac){clearInterval(ac);ac=null}ac=setTimeout(function(){j.currentTime=ap},200)};var O=function(am){am.preventDefault();if(isNaN(j.duration)){return}if(am.targetTouches.length==1){j.pause();var an=am.targetTouches[0];V(an.clientX)}};var n=function(am){am.preventDefault();if(isNaN(j.duration)){return}if(am.targetTouches.length==1){var an=am.targetTouches[0];V(an.clientX)}};var I=function(am){am.preventDefault();if(isNaN(j.duration)){return}};var k=function(am){am.preventDefault();if(isNaN(j.duration)){return}j.currentTime=0;j.play()};var aj=function(am){am.preventDefault();r.toggleFullScreen()};var A=function(am){am.preventDefault();R=j.paused;if(!R){j.pause()}ag.className="db-info-box-wrapper"};var g=function(am){am.preventDefault();ag.className="db-info-box-wrapper db-hide";if(!R){j.play()}};this.init=function(){F=j.parentNode.requestFullScreen||j.parentNode.webkitRequestFullScreen||j.parentNode.mozRequestFullScreen||j.parentNode.msRequestFullScreen;af=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.exitFullscreen;if(mobile.iPad()){al="touchstart"}E();f();j.addEventListener("pause",ai,false);j.addEventListener("play",ai,false);if(!mobile.iPad()){j.addEventListener("volumechange",L,false)}j.addEventListener("timeupdate",q,false);j.addEventListener("progress",K,false);if(this.canFullscreen()){document.addEventListener("fullscreenchange",t);document.addEventListener("mozfullscreenchange",t);document.addEventListener("webkitfullscreenchange",t)}D.addEventListener(al,ak,false);if(!mobile.iPad()){p.addEventListener(al,i,false);if(ad!="classic"){aa.addEventListener("mousedown",h,false);aa.addEventListener("mousemove",s,false);document.body.addEventListener("mouseup",G,false)}}ae.addEventListener(al,l,false);if(!mobile.iPad()){Q.addEventListener("mousemove",J,false);Q.addEventListener("mouseout",e,false);Q.addEventListener("click",m,false)}if(C){C.addEventListener("touchstart",O,false);C.addEventListener("touchmove",n,false);C.addEventListener("touchend",I,false)}y.addEventListener(al,k,false);if(P){P.addEventListener(al,aj,false)}if(ah){ah.addEventListener(al,A,false)}if(v){v.addEventListener(al,g,false)}}}function dbloader(f){var e=this;var i,h,d=false;var c=10,g=40;this.show=function(){if(!d){i.style.display="block";h=setInterval(a,60);d=true}};this.hide=function(){if(d){d=false;i.style.display="none";clearInterval(h)}};var a=function(){c=c+g;if(c>569){c=10}i.style.backgroundPosition=-c+"px -556px"};this.init=function(){i=document.createElement("div");i.className="db-video-loading";i.style.display="none";f.appendChild(i)}}function dbmovie(el){var self=this;var video,container;var width,height,data,menudata;var loader;var menu;var player;var btnPlay,btnReplay;var loginbox,lbLoginError;var clickEventName="click";var SIncorrectPassword="Incorrect password";SEmptyUsername="Empty user name";SCannotConnectToServer="Cannot connect to server!";var readParameters=function(){width=el.getAttribute("width");height=el.getAttribute("height");var json;json=el.getAttribute("data-setup");data=eval("("+json+")");json=el.getAttribute("data-menu");if(json){menudata=eval("("+json+")")}if(mobile.iPad()){clickEventName="touchend";data.showplaybutton=true;if(data.fittobrowser){var viewPortTag=document.createElement("meta");viewPortTag.name="viewport";viewPortTag.content="width=device-width, initial-scale=1.0, user-scalable=no";document.getElementsByTagName("head")[0].appendChild(viewPortTag)}}};var createContainer=function(){container=el.parentNode;video=el;container.className="db-video-container";container.style.width=width+"px";video.style.visibility="hidden";video.style.opacity=0;return(video.canPlayType)};var checkDomain=function(){if(!data.domain){return false}if(!data.domain.lock){return false}if(data.domain.lock=="no"){return true}a=window.location.hostname;b=data.domain.lock;a=a.toLowerCase();a=a.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0];a=md5(a);if(a!=b){switch(data.domain.action){case 0:var a=createElement(container,"a","db-errormsg");a.href=data.domain.url;a.innerHTML=data.domain.text;break;case 1:window.location.href=data.domain.url;break}return false}return true};var checkExpiration=function(){if(!data.expire.enabled){return true}var expire=new Date(data.expire.year,data.expire.month,data.expire.day);var today=new Date();if(today.getTime()>=expire.getTime()){switch(data.expire.action){case 0:var a=createElement(container,"a","db-errormsg");a.href=data.expire.url;a.innerHTML=data.expire.text;break;case 1:window.location.href=data.expire.url;break}return false}return true};var md5=function(string){function RotateLeft(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits))}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&2147483648);lY8=(lY&2147483648);lX4=(lX&1073741824);lY4=(lY&1073741824);lResult=(lX&1073741823)+(lY&1073741823);if(lX4&lY4){return(lResult^2147483648^lX8^lY8)}if(lX4|lY4){if(lResult&1073741824){return(lResult^3221225472^lX8^lY8)}else{return(lResult^1073741824^lX8^lY8)}}else{return(lResult^lX8^lY8)}}function F(x,y,z){return(x&y)|((~x)&z)}function G(x,y,z){return(x&z)|(y&(~z))}function H(x,y,z){return(x^y^z)}function I(x,y,z){return(y^(x|(~z)))}function FF(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function ConvertToWordArray(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(string.charCodeAt(lByteCount)<<lBytePosition));lByteCount++}lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(128<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray}function WordToHex(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2)}return WordToHexValue}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else{if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}}}return utftext}var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=Utf8Encode(string);x=ConvertToWordArray(string);a=1732584193;b=4023233417;c=2562383102;d=271733878;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,3614090360);d=FF(d,a,b,c,x[k+1],S12,3905402710);c=FF(c,d,a,b,x[k+2],S13,606105819);b=FF(b,c,d,a,x[k+3],S14,3250441966);a=FF(a,b,c,d,x[k+4],S11,4118548399);d=FF(d,a,b,c,x[k+5],S12,1200080426);c=FF(c,d,a,b,x[k+6],S13,2821735955);b=FF(b,c,d,a,x[k+7],S14,4249261313);a=FF(a,b,c,d,x[k+8],S11,1770035416);d=FF(d,a,b,c,x[k+9],S12,2336552879);c=FF(c,d,a,b,x[k+10],S13,4294925233);b=FF(b,c,d,a,x[k+11],S14,2304563134);a=FF(a,b,c,d,x[k+12],S11,1804603682);d=FF(d,a,b,c,x[k+13],S12,4254626195);c=FF(c,d,a,b,x[k+14],S13,2792965006);b=FF(b,c,d,a,x[k+15],S14,1236535329);a=GG(a,b,c,d,x[k+1],S21,4129170786);d=GG(d,a,b,c,x[k+6],S22,3225465664);c=GG(c,d,a,b,x[k+11],S23,643717713);b=GG(b,c,d,a,x[k+0],S24,3921069994);a=GG(a,b,c,d,x[k+5],S21,3593408605);d=GG(d,a,b,c,x[k+10],S22,38016083);c=GG(c,d,a,b,x[k+15],S23,3634488961);b=GG(b,c,d,a,x[k+4],S24,3889429448);a=GG(a,b,c,d,x[k+9],S21,568446438);d=GG(d,a,b,c,x[k+14],S22,3275163606);c=GG(c,d,a,b,x[k+3],S23,4107603335);b=GG(b,c,d,a,x[k+8],S24,1163531501);a=GG(a,b,c,d,x[k+13],S21,2850285829);d=GG(d,a,b,c,x[k+2],S22,4243563512);c=GG(c,d,a,b,x[k+7],S23,1735328473);b=GG(b,c,d,a,x[k+12],S24,2368359562);a=HH(a,b,c,d,x[k+5],S31,4294588738);d=HH(d,a,b,c,x[k+8],S32,2272392833);c=HH(c,d,a,b,x[k+11],S33,1839030562);b=HH(b,c,d,a,x[k+14],S34,4259657740);a=HH(a,b,c,d,x[k+1],S31,2763975236);d=HH(d,a,b,c,x[k+4],S32,1272893353);c=HH(c,d,a,b,x[k+7],S33,4139469664);b=HH(b,c,d,a,x[k+10],S34,3200236656);a=HH(a,b,c,d,x[k+13],S31,681279174);d=HH(d,a,b,c,x[k+0],S32,3936430074);c=HH(c,d,a,b,x[k+3],S33,3572445317);b=HH(b,c,d,a,x[k+6],S34,76029189);a=HH(a,b,c,d,x[k+9],S31,3654602809);d=HH(d,a,b,c,x[k+12],S32,3873151461);c=HH(c,d,a,b,x[k+15],S33,530742520);b=HH(b,c,d,a,x[k+2],S34,3299628645);a=II(a,b,c,d,x[k+0],S41,4096336452);d=II(d,a,b,c,x[k+7],S42,1126891415);c=II(c,d,a,b,x[k+14],S43,2878612391);b=II(b,c,d,a,x[k+5],S44,4237533241);a=II(a,b,c,d,x[k+12],S41,1700485571);d=II(d,a,b,c,x[k+3],S42,2399980690);c=II(c,d,a,b,x[k+10],S43,4293915773);b=II(b,c,d,a,x[k+1],S44,2240044497);a=II(a,b,c,d,x[k+8],S41,1873313359);d=II(d,a,b,c,x[k+15],S42,4264355552);c=II(c,d,a,b,x[k+6],S43,2734768916);b=II(b,c,d,a,x[k+13],S44,1309151649);a=II(a,b,c,d,x[k+4],S41,4149444226);d=II(d,a,b,c,x[k+11],S42,3174756917);c=II(c,d,a,b,x[k+2],S43,718787259);b=II(b,c,d,a,x[k+9],S44,3951481745);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD)}var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase()};var ajaxCall=function(url,method,params,onsuccess,onerror){var http=new XMLHttpRequest();url=url+"?random="+Math.floor(Math.random()*999999);switch(method){case"get":url=url+"&"+params;http.open("GET",url,true);http.onreadystatechange=function(){if(http.readyState==4){if(http.status==200){onsuccess(http.responseText)}else{onerror()}}};http.send(null);break;case"post":http.open("POST",url,true);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.setRequestHeader("Content-length",params.length);http.setRequestHeader("Connection","close");http.onreadystatechange=function(){if(http.readyState==4){if(http.status==200){onsuccess(http.responseText)}else{onerror()}}};http.send(params);break}};var ajaxOnSuccess=function(value){if(value!="valid=true"){lbLoginError.innerHTML=SIncorrectPassword}else{lbLoginError.innerHTML="";loginbox.parentNode.removeChild(loginbox);loadParameters()}};var ajaxOnError=function(){lbLoginError.innerHTML=SCannotConnectToServer};var checkPassword=function(){if(!data.password.enabled){return true}var edUsername,edPassword,btnLogin;var rowusername;loginbox=createElement(container,"div","db-login-box-wrapper");var template='<div class="db-login-box-wrapper"><div class="db-login-box"><div class="db-login-box-header"><div class="db-login-box-icon"></div><h2>Login</h2></div><div class="db-login-box-content"><form><div class="login-username"><label>Username</label><input type="text"/></div><div class="login-password"><label>Password</label><input type="password"/></div><div class="db-login-submit"><input type="button" value="Continue"/></div><p class="db-login-error "></p></form></div></div></div>';loginbox.innerHTML=template;edUsername=loginbox.getElementsByTagName("input")[0];edPassword=loginbox.getElementsByTagName("input")[1];btnLogin=loginbox.getElementsByTagName("input")[2];lbLoginError=loginbox.getElementsByClassName("db-login-error ")[0];rowusername=loginbox.getElementsByClassName("login-username")[0];switch(data.password.type){case 0:rowusername.className="login-username db-hide";edPassword.focus();btnLogin.addEventListener(clickEventName,function(event){event.preventDefault();var password=edPassword.value;if(password==""){lbLoginError.innerHTML=SIncorrectPassword;return}if(md5(password)==data.password.preset.value){lbLoginError.innerHTML="";loginbox.parentNode.removeChild(loginbox);loadParameters()}else{lbLoginError.innerHTML=SIncorrectPassword}},false);break;case 1:if(!data.password.serverscript.askusername){rowusername.className="login-username db-hide";edPassword.focus()}else{edUsername.focus()}btnLogin.addEventListener(clickEventName,function(event){event.preventDefault();var username=edUsername.value;var password=edPassword.value;if((data.password.serverscript.askusername)&&(username=="")){lbLoginError.innerHTML=SEmptyUsername;return}if(password==""){lbLoginError.innerHTML=SIncorrectPassword;return}var params="password="+password;if(data.password.serverscript.askusername){params="username="+username+"&"+params}var url=data.password.serverscript.url;var method=data.password.serverscript.method;ajaxCall(url,method,params,ajaxOnSuccess,ajaxOnError)},false);break}};var createElement=function(parent,tag,cssclass){var element=document.createElement(tag);if(tag=="a"){element.href="#"}if(cssclass){element.className=cssclass}parent.appendChild(element);return element};var createThumbPlayBtn=function(){var source=video.getElementsByTagName("source")[0];var src=source.getAttribute("src").split(".")[0]+".png";thumb=new Image();thumb.src=src;thumb.style.visibility="hidden";container.appendChild(thumb);thumb.onload=function(){thumb.style.visibility="visible";this.style.marginLeft=-Math.floor(this.width/2)+"px";this.style.marginTop=-Math.floor(this.height/3)+"px"};thumb.onerror=function(){};var a=createElement(container,"a","db-thumb-playbtn");a.addEventListener(clickEventName,function(event){event.preventDefault();container.removeChild(this);container.removeChild(thumb);if(data.password.enabled){checkPassword()}else{loadParameters()}},false)};var addPlayBtn=function(){btnPlay=createElement(container,"a","db-video-onscreen-play");var span=createElement(btnPlay,"span");btnPlay.style.display="none";btnPlay.addEventListener(clickEventName,function(event){event.preventDefault();btnPlay.style.display="none";video.play()},false)};var addReplayBtn=function(){btnReplay=createElement(container,"a","db-video-onscreen-replay");var span=createElement(btnReplay,"span");btnReplay.style.display="none";btnReplay.addEventListener(clickEventName,function(event){event.preventDefault();btnReplay.style.display="none";video.play()},false)};var addMenu=function(){menu=new dbmenu(video,menudata);menu.init()};var addPlayerbar=function(){player=new dbplayer(video,width,height,getMenuHeight(),data.fittobrowser,data.playerbar.style,data.playerbar);player.init();player.play()};var getMenuHeight=function(){var menuheight=0;if(menu){menuheight=menu.getHeight()}return menuheight};var fitToBrowser=function(){var viewportwidth=window.innerWidth;var viewportheight=window.innerHeight;var w=width;var h=height;var rw,rh,r;var maxw;viewportwidth=viewportwidth-20;viewportheight=viewportheight-20;viewportheight=viewportheight-getMenuHeight();rw=viewportwidth/w;rh=viewportheight/h;r=Math.min(rw,rh);w=Math.floor(r*w);maxw=100;if(w<maxw){w=maxw;r=w/width}h=Math.floor(r*h);video.setAttribute("width",w);video.setAttribute("height",h);container.style.width=w+"px"};this.resize=function(){if(player){if(player.fullscreen){if(!player.canFullscreen()){player.fitToBrowser()}}else{if(data.fittobrowser){if(player.canFullscreen()){player.fitToBrowser()}}}}else{if(data.fittobrowser){fitToBrowser()}}};var onVideoClick=function(event){event.preventDefault();if(isNaN(video.duration)){return}if(video.paused){btnPlay.style.display="none";video.play()}else{btnPlay.style.display="block";video.pause()}};var onVideoLoading=function(){loader.show()};var onVideoReady=function(){loader.hide()};var onVideoEnded=function(){video.pause();if(typeof ReportScore!="undefined"){ReportScore(100)}switch(data.atend.action){case 0:if(data.atend.replaybutton){btnReplay.style.display="block"}break;case 1:video.play();break;case 2:var FF=(document.getBoxObjectFor!=null||window.mozInnerScreenX!=null);if(FF){alert("In Firefox you can only close a window that was previously opened via JavaScript")}else{window.close()}break;case 3:var url=data.atend.parama;if((url.indexOf("http://")==-1)&&(url.indexOf("https://")==-1)){url="http://"+url}switch(data.atend.paramb){case 0:window.location=url;break;case 1:var newtab=window.open();newtab.location=url;break;case 2:window.opener.location.href=url;break;case 3:top.location=url;break}break;case 4:break;case 5:break;case 6:eval(data.atend.parama);break}};var loadParameters=function(){loader=new dbloader(container);loader.init();video.style.visibility="visible";video.style.opacity=1;if(menudata){addMenu()}if(!mobile.iPad()){addPlayBtn()}if((data.atend.action==0)&&(data.atend.replaybutton)){addReplayBtn()}if(data.playerbar.style!="(none)"){addPlayerbar();if(data.fittobrowser){if(player.canFullscreen()){player.fitToBrowser()}else{player.toggleFullScreen()}}}else{if(data.fittobrowser){fitToBrowser()}video.play()}video.addEventListener("ended",onVideoEnded,false);if(!mobile.iPad()){video.addEventListener(clickEventName,onVideoClick,false)}video.addEventListener("waiting",onVideoLoading,false);video.addEventListener("playing",onVideoReady,false);video.addEventListener("seeking",onVideoLoading,false);video.addEventListener("seeked",onVideoReady,false);if(!mobile.iPad()){video.addEventListener("contextmenu",function(event){event.preventDefault()},false)}};this.init=function(){readParameters();if(createContainer()){if((checkDomain())&&(checkExpiration())){if(data.showplaybutton){createThumbPlayBtn()}else{if(data.password.enabled){checkPassword()}else{loadParameters()}}}}}}var dbmovies={movies:[],init:function(){var e=(mobile.Android()||mobile.BlackBerry()||mobile.iPhone()||mobile.iPod()||mobile.Windows());var d=document.getElementsByTagName("video");for(var c=0;c<=d.length-1;c++){if(d[c].getAttribute("data-setup")){if(e){d[c].controls=true}else{var a=new dbmovie(d[c]);a.init();this.movies.push(a)}}}},resize:function(){for(var a=0;a<=this.movies.length-1;a++){this.movies[a].resize()}}};window.addEventListener("load",function(){dbmovies.init()},false);window.addEventListener("resize",function(){dbmovies.resize()},false);